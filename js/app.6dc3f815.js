(function(e){function t(t){for(var n,s,i=t[0],u=t[1],c=t[2],l=0,d=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,s=1;s<o.length;s++){var u=o[s];0!==r[u]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},r={app:0},a=[];function s(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1e943534":"935fde67","chunk-2d0cfa15":"56cb4aed"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(e){var t=[],o=r[e];if(0!==o)if(o)t.push(o[2]);else{var n=new Promise((function(t,n){o=r[e]=[t,n]}));t.push(o[2]=n);var a,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=s(e);var c=new Error;a=function(t){u.onerror=u.onload=null,clearTimeout(l);var o=r[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",c.name="ChunkLoadError",c.type=n,c.request=a,o[1](c)}r[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:u})}),12e4);u.onerror=u.onload=a,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=c;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"357d":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("2b0e"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("signin"),e.userInfo?t("header",[t("div",{staticClass:"fl"},[t("div",{staticClass:"logo"}),t("div",{staticClass:"tit"},[e._v("车联网动态监控平台")]),t("div",{staticClass:"menu"},e._l(e.menu,(function(o,n){return t("div",{staticClass:"li"},[t("i",{class:"icon-"+o.ico}),t("span",[e._v(e._s(o.txt))])])})),0)]),t("div",{staticClass:"fr"},[e._v("欢迎您："+e._s(e.userInfo.user_name)),t("i",{staticClass:"icon-enter",on:{click:function(t){return e.logout()}}})])]):e._e(),t("transition",[t("router-view")],1)],1)},a=[],s=o("2f62"),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"signin",class:{show:!e.userInfo}},[t("div",{staticClass:"box"},[e._m(0),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"40px"}},[t("el-form-item",{attrs:{label:"用户"}},[t("el-input",{ref:"username",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signin.apply(null,arguments)}},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),t("el-form-item",{attrs:{label:"密码"}},[t("el-input",{ref:"password",attrs:{type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signin.apply(null,arguments)}},model:{value:e.form.secret,callback:function(t){e.$set(e.form,"secret",t)},expression:"form.secret"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",disabled:e.disabled,icon:"el-icon-user-solid"},on:{click:e.signin}},[e._v("登 录")])],1)],1)],1)])},u=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"t_name"},[t("b",[e._v("登录")]),t("sub",[e._v("车联网动态监控平台")])])}];o("14d9");var c={data(){return{form:{id:"",secret:""},disabled:!1}},components:{},computed:{...Object(s["b"])(["userInfo"])},created(){},watch:{},mounted(){this.getCaptcha()},methods:{signin(){this.disabled=!0,this.$store.dispatch("SignIn",{id:"MTkwLjEwNDcyLjc5OQ",secret:"9e810d2c90129ecf9160bafca6e9348e"}).then(()=>{this.$message.success("登录成功"),this.$router.push("/carList"),this.disabled=!1}).catch(e=>{this.disabled=!1})},getCaptcha(){}}},l=c,p=o("2877"),d=Object(p["a"])(l,i,u,!1,null,null,null),m=d.exports,f={data(){return{menuInd:0,menus:["车辆监控","统计报表"],menu:[{txt:"车辆监控",ico:"meter",url:"/carList"},{txt:"统计报表",ico:"bars",url:"/chart"}]}},name:"App",computed:{...Object(s["b"])(["userInfo"])},components:{signin:m},mounted(){},methods:{logout(){this.$store.dispatch("SignOut").then(()=>{})}},watch:{}},h=f,g=Object(p["a"])(h,r,a,!1,null,null,null),y=g.exports,v=o("8c4f"),k=o("bc3a"),b=o.n(k);const S=e=>{n["default"].prototype.$toast.error(e)},w=(e,t)=>{switch(e){case 401:S("登录过期，请重新登录"),x.dispatch("SignOut").then(),x.commit("SET_SIGNPOP",!0),location.reload();break;case 403:case 404:S("请求的资源不存在\n"+t);break;case 411:localStorage.setItem("serverTime",t),S("请求超时请重试\n"+t);break;case 500:S("服务500错误\n"+t);break;default:S(t||e);break}},_=b.a.create({timeout:12e3});function E(e,t){return n["default"].prototype.$lock?Promise.reject():(n["default"].prototype.$lock=!0,_({url:e,method:"post",data:t}))}function O(e,t){if(t){let o="?",n=Object.entries(t);n.forEach(e=>{(e[1]||0==e[1])&&(o+=e[0]+"="+e[1]+"&")}),e+=o.replace(/&$/,"")}return _({url:e,method:"get"})}_.defaults.baseURL="",_.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",_.interceptors.request.use(e=>{localStorage.getItem("token");return/^http/.test(e.url)?e.baseURL="":/^cdn/.test(e.url)?e.baseURL=n["default"].prototype.$BASECDN:(e.baseURL=n["default"].prototype.$BASEAPI,localStorage.token&&(e.headers.Authorization=localStorage.token)),e},e=>Promise.reject(e)),_.interceptors.response.use(e=>(n["default"].prototype.$lock&&setTimeout(()=>{n["default"].prototype.$lock=!1},2e3),/^20/.test(e.status)?e.data.data:Promise.reject(e)),e=>{n["default"].prototype.$lock&&setTimeout(()=>{n["default"].prototype.$lock=!1},2e3);const{response:t}=e;return t?(w(t.status,t.data.msg||t.data.message),Promise.reject(t)):window.navigator.onLine?Promise.reject(e):void x.commit("changeNetwork",!1)});const I=localStorage.getItem("userInfo"),P={state:{user:I?JSON.parse(I):null,signPop:!1,calenPop:!1,token:localStorage.getItem("token")},mutations:{SET_USER:(e,t)=>{t?(e.user=t,e.token=t.token,localStorage.setItem("userInfo",JSON.stringify(t)),localStorage.setItem("token",e.token)):(localStorage.removeItem("userInfo"),localStorage.removeItem("token"),e.user=null,e.token=null),e.signPop=!1},SET_SIGNPOP:(e,t)=>{e.signPop=t},SET_IMG:(e,t)=>{e.upimg=t}},actions:{SignIn({commit:e},t){return new Promise((o,n)=>{E("video/webapi/user/login",t).then(t=>{t&&t.token?(e("SET_USER",t),o(t)):n(t)}).catch(e=>{n(e)})})},SignUp({commit:e},t){return new Promise((o,n)=>{E("auth/signup",t).then(t=>{t&&t.username?(localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",t.token),e("SET_USER",t),o(t)):n(t)}).catch(e=>{n(e)})})},SignOut({commit:e}){return new Promise(t=>{localStorage.removeItem("user"),localStorage.removeItem("token"),e("SET_USER",null),U.push("/"),t()})},clearAll({commit:e}){return new Promise(t=>{e("SET_USER",null),t()})}}};var T=P;const $={signPop:e=>e.user.signPop,token:e=>e.user.token,userInfo:e=>e.user.user,upimg:e=>e.user.upimg,user:e=>e.user};var C=$;n["default"].use(s["a"]);const j=new s["a"].Store({modules:{user:T},getters:C});var x=j;v["a"].prototype.goBack=function(){window.history.go(-1)},n["default"].use(v["a"]);const A=[{path:"/",name:"首页",component:()=>o.e("chunk-2d0cfa15").then(o.bind(null,"6511")),meta:{K:!1}},{path:"/carList",name:"车辆监控",component:()=>o.e("chunk-1e943534").then(o.bind(null,"a732")),meta:{K:!0}},{path:"/*",redirect:"/"}],N=new v["a"]({routes:A,mode:"history",linkActiveClass:"active",linkExactActiveClass:"active"});N.beforeEach((e,t,o)=>{e.name&&(document.title="D-"+e.name),o()});var U=N,D=o("5c96"),L=o.n(D);o("0fae"),o("357d");function R(e){const t={},o={},n={};for(const r of Object.keys(e)){const[a,s,i]=e[r];t[r]=a,o[a]=i,n[a]=s}return{...t,getTextByName(t){return e[t]&&e[t][1]||""},getValueByName(t){return e[t]&&e[t][0]||0},getTextByValue(e){return n[e]||""},getVal(e){return o[e]||0},Arr(){return e}}}var M={errorCode:R({ErrUnauthenticated:[10002,"没有权限"],ErrMaxQRConvMemberNum:[10004,"面对面分享群人数达到上限"],ErrInaccurateAnswer:[10005,"密保问题答案错误"]}),userRole:R({normal:[1,"普通用户"],manage:[9,"管理员"],admin:[10,"站长"]})};n["default"].use(v["a"]);const B=v["a"].prototype.push;v["a"].prototype.push=function(e){return B.call(this,e).catch(e=>e)},n["default"].use(L.a);const J=location.hostname.replace("ais.",""),q={dev:"https://bd.sdyqiot.com/",pud:J||"akid.cloud"};n["default"].prototype.$BASEAPI="https://bd.sdyqiot.com/",n["default"].prototype.$BASECDN=location.protocol+"//cdn."+q.pud+"/",n["default"].prototype.$BASEWEB=location.protocol+"//"+q.pud+"/",n["default"].prototype.$lock=!1,n["default"].prototype.$post=E,n["default"].prototype.$get=O,n["default"].prototype.CONST=M,n["default"].prototype.ROUND=(e,t)=>{const o=t?Math.pow(10,t):100;return Math.round(e*o)/o},n["default"].prototype.$defForm={status:null,type:null,page:1,key:null,start:null,end:null},n["default"].prototype.$ppo={shortcuts:[{text:"今天",onClick(e){const t=new Date,o=new Date;o.setTime(o.getTime()-864e5),e.$emit("pick",[o,t])}},{text:"最近一周",onClick(e){const t=new Date,o=new Date;o.setTime(o.getTime()-6048e5),e.$emit("pick",[o,t])}},{text:"最近一个月",onClick(e){const t=new Date,o=new Date;o.setTime(o.getTime()-2592e6),e.$emit("pick",[o,t])}},{text:"最近三个月",onClick(e){const t=new Date,o=new Date;o.setTime(o.getTime()-7776e6),e.$emit("pick",[o,t])}}]},n["default"].config.productionTip=!1,window.MVUE=new n["default"]({router:U,store:x,data:{eventHub:new n["default"]},render:e=>e(y)}).$mount("#app")}});
//# sourceMappingURL=app.6dc3f815.js.map